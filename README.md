# AWS Container Hands On
新井様(著)・馬勝様(著)、佐々木様(監修)の「[AWSコンテナ設計・構築［本格］入門](https://www.amazon.co.jp/dp/B09DKZC1ZH/ref=dp-kindle-redirect?_encoding=UTF8&btkr=1)」のハンズオン＋αをTerraformで実現してみるリポジトリです

参考リポジトリ：[uma-arai/sbcntr-resources](https://github.com/uma-arai/sbcntr-resources)

## 機能一覧
以下の機能を実装していきます

| 設計項目                  |実施状況| 機能 | 備考 |
| ----                     | ----- | ------ | --- |
| ロギング設計              | 済み | FireLensによるログ運用 |  |
| ロギング設計              | 未 | CloudWatchアラームによる通知 |  |
| メトリクス設計            | 未 | CloudWatch Container Insightsの有効化 |  |
| メトリクス設計            | 未 | CloudWatchアラームによる通知 |  |
| トレース設計              | 未 | X-Rayの導入とサービスマップの可視化 |  |
| トレース設計              | 未 | APMの取得 |  |
| CI/CD設計                 | 済み | Code系サービスによる単一AWSアカウントのCI/CD構築 |  |
| CI/CD設計                 | 未 | マルチアカウント構成におけるCI/CD構築 |  |
| CI/CD設計                 | 未 | 承認プロセスの実装 |  |
| CI/CD設計                 | 未 | S3アーティファクトバケットのアクセス制御 |  |
| イメージのメンテナンス運用 | 済み | ECRイメージのライフサイクル運用　※commit hashによるタグ付け運用・イメージタグのImmutable設定 |  |
| イメージのメンテナンス運用 | 未 | マルチアカウント構成におけるイメージ管理運用 |  |
| イメージのメンテナンス運用 | 未 | ECRリポジトリポリシーの設定 |  |
| Bastion設計               | 未 | ECSタスクにおけるBastionホスト構築 |  |
| イメージの脆弱性          | 未 | CI/CDパイプラインにおけるTrivyスキャンの実装 |  |
| イメージの脆弱性          | 済み | ECRプッシュ時のイメージスキャン有効化 |  |
| イメージの脆弱性          | 未 | ECRイメージの日時スキャン |  |
| イメージ設定の不具合       | 未 | Dockleによるイメージチェック |  |
| マルウェア対策            | 済み | 信頼されたベースイメージの利用　※暗黙的にOfficial Imageを選択 |  |
| マルウェア対策            | 未 | GuardDutyの有効化 |  |
| 埋め込まれた平文の秘密情報 | 済み | Secrets Managerによる秘密情報管理 |  |
| 信頼できないイメージの使用 | 未 | コンテナイメージの署名検証 |  |
| レジストリ内の古いイメージ | 済み | ECRイメージのライフサイクル運用 |  |
| レジストリ内の古いイメージ | 済み | イメージタグのImmutable設定 |  |
| 不十分な認証・認可制限     | 未 | IAMポリシー |  |
| 不十分な認証・認可制限     | 済み | プライベートリポジトリ |  |
| 不十分な認証・認可制限     | 未 | ECRパブリックリポジトリの操作禁止 |  |
| 不十分な認証・認可制限     | 未 | ECSリポジトリポリシーの設定 |  |
| 無制限の管理アクセス       | 未 | IAMによるECSクラスターへのアクセス制御 |  |
| コンテナ間のネットワークトラフィックの不十分な分離 | 済み | ECSタスク間の通信　※SGによる制限 |  |
| コンテナからの無制限ネットワークアクセス | 未 | パブリックNW⇒VPCへの通信制御　※SGによる制限 |  |
| コンテナからの無制限ネットワークアクセス | 未 | VPC⇒パブリックNWへの通信制御 |  |
| コンテナからの無制限ネットワークアクセス | 未 | VPCエンドポイントによるプライベート通信 |  |
| コンテナからの無制限ネットワークアクセス | 未 | NATゲートウェイによるパブリック通信 |  |
| アプリケーションの脆弱性    | 済み | ECSタスク定義でルートファイルシステムの読み取り専用化 |  |
| 未承認のコンテナ           | 未 | ECRリポジトリポリシーの設定 |  |
| 未承認のコンテナ           | 未 | IAMによるECSタスク定義更新制限 |  |
| マルチAZ構成による可用性向上 | 未 | ECSタスクのマルチAZ配置 |  |
| 障害時切り離しと復旧       | 未 | ECSタスク障害・復旧の確認 |  |
| 安全なコンンテの停止       | 未 | SIGTERMシグナルのハンドリング |  |
| システムメンテナンス時におけるサービス停止 | 未 | ALBリスナールール切り替え |  |
| Auto Scaling              | 済み | ターゲット追跡スケーリングポリシーの設定とテスト |  |
| 不要なリソースの削除       | 未 | 利用時間外のECSタスク停止 |  |
| 不要なリソースの削除       | 未 | 利用時間外のAurora停止 | 書籍範囲外 |
| コンテナサイズ削減         | 未 | alpine利用 |  |
| 統計情報の可視化       | 未 | QuickSight とか | 書籍範囲外 |
| SLO/SLI計測       | 未 | SLOを定義し、SLIを計測し、状況を可視化する | 書籍範囲外 |
| インシデント管理       | 未 | エラー発生時に自動起票を行う | 書籍範囲外 |
| 非エンジニア向けユーザー作成       | 未 | 運用保守者、非エンジニア事業担当者向けユーザーの作成 | 書籍範囲外 |
| HTTPS化       | 未 | ALBにSSL適用 | 書籍範囲外 |
| バックアップ設計       | 未 | バックアッププランの作成とリストア手順確立 | 書籍範囲外 |
| 構成図       | 未 | 構成図の自動生成 | 書籍範囲外 |   